#include <stdlib.h>
#include <stdio.h>
#include <athread.h>
#include <fcntl.h>
#include <sys/mman.h>
#include <sys/types.h>
#include <sys/stat.h>
#include "simd.h"
#include "memory.h"
#include <unistd.h>
#include <mpi.h>
#include "inttypes.h"

//a = 63131495094254949956099018236540153567161363722639541007298640290650116790057349517113190979486245611894822254953610567650336370337831659346883295362974539217238250887325011006521844070856031328754744274718326290144037258970313832383564586662597988735933212187596120302063988749686010796615164983868613553093463875864119238508386015066981330009728661346135829928119357455506968610374657480335864430970070986686243459622495038518596949890602148997323593414830884656241543337085520340133334585775252349973505394174441705060865695660876580540665224722161079584478951374060959693948613302884749817310996452433738075926077934922728268578403878070472562157545512199901424055094800277920187054411719412644267348823127592807427508003852244440104599928376361446460555751076435925562824903768357126162192925395006956050429650484574436858981804734130813251161143599035311958847363678044801324044444769953299537016716517955254683397724724723749390900510741719368162845933405953227749835187444417286701087660772013965736312071664717322926471357251073484454560015093087558186426778009331971710056247342070050150496600659664994959740265585233202081184765311573853824300379174461569644674477472428465506356565403078959787775558607946008310704598654682743927298267163010264374345460418138388005965816036364502590059606437742628255164580798283227227562805157269363551211075636059098762833998796546257840233119985016437243825992349466446946654513268454019356892047092296271181499371758844477412161438567065087603120629521014206642337748180277844814725910276889412592141609853275001786768678815819562409099127278088228297324484316372070262702448100801379304129743161418597155893188757471158593193032371931803216287905760470405354574883709049087209376323077837351940994791451250358342867503574998467024733061739564303771311798546669660518647877695666364938062502266085332111350924292336398177729022937006017008923934526510973068134968454665354353858133427393695612964194380709529832428367646528512905025670566143078138836250568882184741035972950550334711590960802514715557887350746833636903843324056486926150328814220844891494687752784670974659857401637626780887255374447551576478732324805458743069469228635860705532659172666381784782977021463175359427386877350840348703097284986166603565456345333757270347004838275330606316279546033922012163792660612227520852530568326114023466550251970360347844834835197363986311409491601069180004217099640677754127060081158147144735224560623181104044902253643164141890141836062161520114525993702555403071510333660894551006002162833247741017788126699965837731790070746676621273986703313650503105235980148667384378741342298388701101192116044352799170366757579133589141264494368287138595982803658626886548025210328237392696381964127692988572553671418958360309117957745703408364177438520962204695000552445960592068222811381390846481394310419587657697756756567069994533032164597866734103736064291191517101633636565902662793908059462467917451390311249180732106353367974438652642345753146628421847059671460735729277915021699892536042744463274565890600953521206332043640260344806948129626082048494852772720212176380623708848045110431482883013069560802766564499837526970023169215368167458893175354546219835863219458249779818724971891112139670347811951636434560610586043071197513471181016809245901274313893962430044754925040313552219719038422901032041279211328781627696127756546615377354053441857967365546151060997273148558007627469999827430824405220305997777217435277964905864047013485881046114618984305854423560280698020952108423996554756498797739708391061893060975530111369019747918148076515108615021267922320317844597539737561643059136467804845367467173718083318194917503591120248187012114429839526050763407172282645062116488996578369583864864492599312069279447446313351467987200572179350665299270499255270338463511574984142742472851588618322734762793831706732037551893673215654088641025309229407682083945036347504678331596107002407801145055799639931237187328664284285757034572154585129611381298239621129732947281819442478697597227864829010900068093652333612881069788041015790534527582806812240241108392121813596309097854439875356309987492842320681368603541146518448564751051263537591273743858478006918622127490906293175112621571608545573797523887480223171312163819163926537389603831541322598581717145937358702257988351692840219385869879728360478372132346955455921685755623284324305685428570790991883418309661541070810858446988111060551628013707344042353733033538386936033205029236502818900688345753735669607530156935772374491292837430249827097769298074742512982041350931705142056924721021538005720342185282183301521987255041382659411806538819837546922598767454189429759947218486897985273169047132287049206259122879687309474491029309307253765204573701934750470725531908092564541538890758068466904165901649634442337015155496817482835517623117510001470684069361214138446790060808477638252114674349
//b = 86637169679546329026295918279793963545934384012316431263002786671508038067665124531829209264287251696279353603852192840507409512865560948491089669577078819714030187052481038358102961055098621654642754293624160695758897653213423729467704320092283093339001196707757549085438605473019225255542565294619889982563221278411986028414725465618958641506098853135945702712484473970579734092516813246124398937974407425442056218153147409196510438596001734406874469274542287780340678366582120497658892735399066399433056306669085065301393654907985818939861182248798640816873539318497601459266155312460297859544511641203312137588279346130559053826994302547506756619534644613654390041021791949118195011241550881374400245611724524548082573929887043083518572845204397249337903944478089974221953686723750475652312170886629989799967252066634494024460797157949169319040868482938005466120245514335350009769212420817943917345451506984275675065281427628187426037775799130426717714237071853484829046013797660460726407101404499017550291109379556460506930710632641484036905282794784329398659762989601273518793646265178935081286112067126661091784787145719371159483164064671676486297349600291180264938713329022690156322230160772493425254160858745489539650256702488804026339470311064054847621919251177322365279992763234677314841019107498764104344085931569779106238178918943373819126484042261573007559147849872589519931207654758415059493475240594107739587790984404447689392662183259195902186121393378520252717901821194132021842741949108224884053215825326328728311672424742055986124536987031114219576811078802933028789947769370422930071846711868696542857770202070311644072276318633175857444679495434382852499182628262875515752283409073266714552160072321484294032663558790034763634466093476988940178421707847380579199173263335656220125000310182838694772445548138346052873845102972673285649288507785861388907126720098901629936252670880017451970144565351715681475587929003634519629038741697565049356336585181805839082203874347423061475183191066668220553075299359976427041166732585383255868557508318920687845200249276625468677837128012541677274096342471581043867726935646450138158186361656146192169671963213262050292029232230059135505742136555821049361668649203237812771242820533551376198091259956683663729722699971404400267736606023609858678441956910739695835409105456915907843688152153356007224673503371590247756376099273262465187058454382249621013401125369902652797660903598954453835814209474976940981068465733658284587929960459154353200554561897654054276736111612448730935077277175872325840668026640522551427816060415693119588516917909225418227923874382053683986584018132369154471521192368370209364632329624728580106218569508856336984540562913393856925191678801570484068414642273886358111606935873528505504224624132869163385489577616704736040577428092644227395748011641252060041935544015149365207294453386688129172905720670109654657293485863274669229576947309687803126373040821494864101514701935656500177776977377963547594449763216786649558313786496532096463183804931720621416168149183653914778526605745007229748433044648574124954203800534013356089631702935012016282003878066249566728309694261862500464555474799725978062788970948744815721081986681898491155922064213048440083323901105595330294415794083109250751691393023371172999640963508449200644167478908488478681311977008965357962314935175363033800115938025095337288225052171882792384001707179176966284862119081952939159453953609019443067249511426985924885270023850190424404260860694293421541558164915464658619973045019697339947223881744687594976258995046075129173849251955368880259871642194408533868808619678426284128804662505443047507872397376863818478587478552620130935306904762443130817102981767946214281830920093592910066066594118518416062703366255963316535135388662768512963941410318476382422038751515680842858750880053103796878457759913614529266468231285273524150877787967778940501325815732253352462980187277506948111603804792580094588783621498371678655021132610833299995801503300203925267782177905083292708932533330882899589446865415275263448122730439915352034232791216503780661714937154541891750494908479405036857762398271580467045252497655252402659137474837713415080627558576311066725062137298559149649863083353949769900523906403595106854095761149483966091770568081679731474132587018444582253055765627089488039039580742247544828215252977933986423811637973675337235367133316514985969321877045000499616605149802949005520789713094958053586203697892958338374052439508316227209260390203788760290799540238845090378319435310684993513551266212260159622221956612418448263523017515978409957231157433160414294919607459789029355894493764387601910885874156966695773197928020668684834310702106170189882244686917136396563171639239191789541978679366250461575285227551626489816807167462609348229268125339549318804174173133075418828458229135037874802725668124085650658387496997309716473365823
//result is 5469534052604412765675654092318751935171015186840388286498293790530137694737945138413412338915221678338100963012803207847662872411736814761934819403415693975133613502303947805426391625630039935462295251984799574547534006000620177282006481851468590140315012773884280846520950547329047368732809043632350703436025154215370419917864581967447546828766284650314873877402123142873487087547348654396846569383802086207556229477689274160477584620458228432420080609752578884288892090765250241595502005024655146322138462240462792782898510546337249890066922192844103862903654825424374320243319027224755097322147604861834788998591146127106112477451735034572449690525865586930241274630021423163247503915657680130707317618673756977147411906013759019831880723531655982614153904748480793824350443037234027091487342770565664500332719300740854764810404698086549217901069408939809392601609801211891092412785725062722829304857077387935638902981625923283419985851097229063920753457429372052141226229224559181119727523951055714286969083490400123718177091541120534387279727137336194787774547705928620222919698343791531525244072779331991517974461666478469426785648913857517538279482414535691524176492763476300757451790014503287747966962748383604315055572885212894282522979898911731501094862146146434136514690304616475716539046141871172950313832105840037496317572419329097676739811476963295829166370783318964769657725960523109027583977624657731764682985757693045717049151737473250591066724581549204539586586509288587313242999733763733857897952855344606534661596249710390760906430976803587117705452640621354344681099135548579370475319113074379283339856485346273491289775581098429689238504547124023225916870922835992862216162577630107530684240530197305901990072829472392093285822637880168280357887151986969826377820546653055808071751522993916585246788021062399168660212006162155036170200923423697094386570904530485366227287704864840528385543380806234701050747849764126192319105769035340003095884343881520267349553010723130849390550959937346825112786450031738713478709475601179054406758273055711416490018858440062149911017737242932690066109677189476418199791353269280997690969941202609170648639542051556124346937785426669410477444122143954328821747291061565075237097826982621229726930637079653509517987984126786897683301135326214882843662274883315700762239523075558947652004035279747400067605806782848319851484796575822915293006963792675513153191443374012897654200047456632210441812938645254983688911842171601294389742861291633328404358549471365138623606963524027495103703567422567226980926963417117079816639088105847366495912970028663498695324051835576328341014694744187073952868859121044859662698556737637540786870705542309288015028730806661094107649534471330722402953410478100464179167299492908080029373117471920362985270863989852117699724984999810426726340360466980319086141735168273594830702443188254843218894946473784164858401052941037912188428797626868614658229003132231345820775777131981996490323931025877958095506644760844997088942757784290258302580128928992511190760856520786121601450187838953432808431236772870686360300760294394618017148211565652804860574463816283753356715685080954079170338889715053945209136227504355713107378628993660312643123325301979054531553801688492392549324425324197376436659521317110671673350069843121845790629530368234162408908894381576300194256719003533134615924368890792812958061036703236811004532700470093759940344496515080683217099030324746492618321974414642870033772294510037158218621278309180783171864456981058013727225161975441059228104550357026659942862951880111668762410196697092998619512766298104503836967768019745988413316711276138603818193978808811089197799458297254743206855690076898540972866597560658937900946428425233366591839229632141584951786562981856359688173478557014949956785209739562054823903294809349946851109990501294303340502697577739096269933847150723370071557625892052805431018807183429467151479928075195226295635964447867912601649660650267240401053036922962403827984636422984531129407860279327080724585950859502239933826051291661728980140463249762710645988426662935867292543842599464330485866293674122164996366092604357360045323044529340687283504324840310554865538428069339972574869875539690218400208129054406566303265618376425150604900121671344038535403738993972411310255433521811169640876534459694494531186092087989387760499551445958710514565913639040409218419685386504458982221001280030664527289233046846245917070940085238491902072746962045499181239597215806413320741308350905968453361622169407072079835545183607549617595765162594989146080103816407420068924809887936781577658013159228891392296371456707534071942348728976002722928373142680184517496444061814053708942813236448032218868520804412911487399821940586313975626334705624346627894766264066053571985511602745367638765450479721406129928025375262510693089215101341679723857862594267068050154152467153256240347573841130718567302441951000116529308241122314198639337726058929076246761087214067501747812871027857047722881976163228067033817780932008451343326167621016159719053087630531769470767525458744077682882261081592925723497458713984833081765838992156545886311762020057766637597986431761953291939086403198602398790409653347023955625697277767128733173383271919704838054846654468578535311229250258562538456405349469605764737515764169842046422023693555953775618306666692824622826623045312377979999352196061807474919962981877857660991958940274032079465842791322994682717560614025530162716333565861959603954185270181588054154028785410048373147444802235186831529111490666025234655934845492494816814745281854339862281106152888260210820295175354225184882004534196272140750832072913539869618343092859201610629510175048448381826994017054212150957860583197945085511622865626955591279134526886136164045645661434527523128370751806357064091157313113113314103518762857652178293211704976091299358830138561921058862963183703390875511658134596290101349398907133438233059487797573484801323479391930258999301869484421419288174530224960671518568937137895241314518838563090647780261768432923527003249602685949384549094322846949161178754849970299028455181540222627828226692375549211582131871091671823913443760797895987024864094838366179866378854183732673248471611151527334872583431417271603695336398507767259367868383424157825114900956676462709082793016561014192362665064590067625445287851066680972569286032419866031817992194973619323360066418941933837781730491059124114462496734611058026383484424876538570533658105267925688571971305525797735580729814279437636141849382394357416776177936638722766638579078224423739592790519208650044185752794393777007255087908841122663342019952882798231735304581182548712615812028573982967909356972821346543584314201004351154295088797959072171290267027383712047523607157301576873259672892365255900063827710777422554504069786909114032025583000521054804633020917044950036636043991191924001547715194456959428825667630697741596644682656511322598150845582720385878355531414013537017759142368550553368057573956113644883453343482791916769340428856490324596667563677642252900009790055362416972804307081744971174477730688834865787694055317734061475485707820789884373330445457293345069147499341641082166065782502299188759951632422864710382731136637244600573185557824742426711712119158086886878327260942246355007256174358771509367619292092513690971773458813204612933891193620423643184984551605901515947742383627246882288867592705766821951246193571373318514458286763284247438434728971294239528473095894831513648278507302936822013321405319253350290647163030931020922795893941942560894049752255989598318402490332244740537431747879147629378173427129602935640508151642902260971542583456844702381831569251768625466121581033356906828254729916298454136642893843049274509895412008139237392156027026434980096880372044348140827496178150680983115825055450380523955075883713100818772856270260475845269638373058461581766783325838933342387681618285762821854428071715049354183294628748034943803496045558907583839124021518272501183456928449916441212616311998832640971774309529486085573913292753152631339407795897329635829980943475636990671878308292007675104714383374291214247755752456435397022897520491619196966036575700959901890794838305531020905954989483646728095583747327045325154391750616156072052266727980535479836385373878491453444016063808808640877427699301889382795201178115359495475699519806368322283887582212658309923937990827134584698573123736156177655656661172992649466054030908360337757081509588123722938386225800306529968248327227423181188621110384476233346547349804567533942381817986506773762566563037312853680567443203304083460915721666103138339171928350306281267442103047460011494685945899477691279036568067759862430597664529196154260520519061693461708839218095422763715491901298751057294446453935198131203408837695456704469480025950471961648299886113286954371225370519214298398693922081630291707891833858157039911409273403267577411889592478812644346965516895292788911314593607097255920752935701760822943197135200012686013614158314869422136778367993992853222402971612798435475310122554158053078118498397702897844289300122758829570608020275721232635379080676653983414253023693071522045490940496615773499035516196751516188177375065564905660406928072297428715741402565884614981283796191942144570203042532656785992545477112870489682785144636475495119264403897795914289727369114019186104593135122367376569901466132590355093360052032678848525652834342818156097321062550721103053687886952305182670509173535940077098113263027192653773982036497125651451812210455515025204842819221064838586401641868378066551666025852444138106831862573782181772559735741326437216978913406792906120864499685587256421657366751298085275165099018349421456801872147021502024316141657446528232116279657727476422775563871639885824986742219197591374227

#include "public_const.h"


volatile long slave_flag[FLAG_SIZE];
volatile long flag_to_wait;

void wait_slave_flag()
{
    while(slave_flag[0] < flag_to_wait);
    flag_to_wait++;
}


//extern void SLAVE_FUN(func)();
//extern void SLAVE_FUN(cpe_athread_daemon)();
extern void slave_cpe_athread_daemon();
extern void cpe_athread_daemon();

hchjity l_num_a[20000] __attribute__((__aligned__(128)));
hchjity l_num_b[20000] __attribute__((__aligned__(128)));
int num_a_cnt, num_b_cnt;
volatile hchjity* local_compute_rets[CB_GTT];

hchjity final_val[40000] __attribute__((__aligned__(128)));
int final_val_len;

//hchjity* gezi_dst[15];

//絢都小舅子
//malloc
#define AYATO_TOTAL_SZ_D8 524288
#define AYATO_TOTAL_SZ_D128 (AYATO_TOTAL_SZ_D8 / 16)
//536870912 for 4GB
//524288 for 4MB
long __ayato_tmp_static_arr[AYATO_TOTAL_SZ_D8] __attribute__((__aligned__(128)));
int __ayato_cur_place = 0;
static inline void* ayato_malloc(int sz)
{
    if(sz <= 0)
        return NULL;
    int true_lth = sz / 128;//128B align, 16 long
    if(sz % 128 > 0)//aligh
        true_lth++;
    if(sz + __ayato_cur_place > AYATO_TOTAL_SZ_D128)
        return NULL;

    void* ret = (void*)&__ayato_tmp_static_arr[__ayato_cur_place * 16];

    __ayato_cur_place += true_lth;

    //printf("ayato_malloc, sz = %d, true_lth = %d, __ayato_cur_place finally = %d\n", sz, true_lth, __ayato_cur_place);

    return ret;
}
//ptr free: not to provide

 long rpcc()
 {
    long a;
    asm("memb");
    asm("rtc %0":"=r"(a));
    return a;
 }

void read_util()
{
    FILE *fp = fopen("inputdata.txt", "r");
    char buf;

    int* cur_cnt_ptr = &num_a_cnt;
    hchjity* cur_num_ptr = &l_num_a[0], *num_arr_ptr = &l_num_a[0];

    num_a_cnt = 1;
    num_b_cnt = 1;

    l_num_a[0] = 0;
    l_num_b[0] = 0;

    int tmp_place = 0;
    hchjity tmp_mul = 1;

    fseek(fp, 0, SEEK_END);
    int blank_cnt = 0;

    //拙劣实现，类似标准库的方式。倒着读字符串。
    while(1)
    {
        //从最后一个字符串开始处理
        fseek(fp, -1, SEEK_CUR);
        buf = fgetc(fp);
        fseek(fp, -1, SEEK_CUR);

        //如果不是空格或者数字，直接continue
        if(buf != ' ' && buf != '\b' && buf != '\t' && (buf < '0' || buf > '9'))
            continue;

        //遇到中间的空格，完成第一个长整数的读取，开始读取第二个长整数
        if(buf == '\b' || buf == '\t' ||  buf == ' ')
        {
            if(blank_cnt > 0)
                break;
            blank_cnt++;
            cur_cnt_ptr = &num_b_cnt;
            cur_num_ptr = &l_num_b[0];
            num_arr_ptr = &l_num_b[0];//not used?
            tmp_place = 0;
            tmp_mul = 1;
            continue;
        }
        
        //当前%ld数位
        tmp_place++;

        //读入一个数字字符，修改%ld
        cur_num_ptr[0] += (buf - '0') * tmp_mul;
        tmp_mul *= 10;


        //判别是否进行读入指针偏移
        if(tmp_place == KIU)
        {
            tmp_place = 0;
            tmp_mul = 1;
            cur_cnt_ptr[0]++;
            cur_num_ptr = cur_num_ptr + 1;//指针偏移
        }
        if(ftell(fp) == 0)
            break;
    }

//print
    int i;
    printf("arr a: cnt = %d\n", num_a_cnt);
//    for(i = 0; i < num_a_cnt; i++)
//    {
//        printf("%ld\n", l_num_a[i]);
//    }

    printf("arr b: cnt = %d\n", num_b_cnt);
//    for(i = 0; i < num_b_cnt; i++)
//    {
//        printf("%ld\n", l_num_b[i]);
//    }

    printf("sizeof(hchjity) = %d, KIU = %d\n", sizeof(hchjity), KIU);
    printf("end of read file\n");
}

void write_util(long ttedcc)
{
    //char bf[30000];

    //result.txt--------------------输出结果文件
    //time.txt----------------------运行时间记录文件

    int i;

    FILE *fp1 = fopen("result.txt", "w");
    FILE *fp2 = fopen("time.txt", "w");

    int no_zero_occured = 0;

    hchjity my_zero = 0;

    for(i = final_val_len - 1; i >= 0; i--)
    {
//        printf("write_util %d  %08ld\n", i, final_val[i]);
        if(final_val[i] != my_zero && no_zero_occured == 0)
        {
            no_zero_occured = 1;

            printf("%ld", final_val[i]);
            fprintf(fp1, "%ld", final_val[i]);

            continue;
        }

        if(no_zero_occured == 0)//in this case, do not print 0
        {
            if(final_val[i] == 0)
                continue;
        }

        printf("%08ld", final_val[i]);
        fprintf(fp1, "%08ld", final_val[i]);
    }
    printf("\n");

    printf("ttt = %ld\n", ttedcc);
    fprintf(fp2, "%ld", ttedcc);

    fclose(fp1);
    fclose(fp2);

}

long ccs[16];

static inline void compute_util()
{
    int i, j, k;

    long stcc, edcc;


    final_val_len = num_a_cnt + num_b_cnt;

    ////conghe emulator
    stcc = rpcc();
    //pad 0
    {
        // printf("before pad 0, cnt a = %d, cnt b = %d\n", num_a_cnt, num_b_cnt);

        if(num_a_cnt > num_b_cnt)
            num_b_cnt = num_a_cnt;
        else
            num_a_cnt = num_b_cnt;//对角线对称存储

        int vec_min_len = 32 / sizeof(hchjity);
        //确保每个从核的计算部分都在一个向量里面
        int min_all_len = 8 * vec_min_len;
        int rem_a = num_a_cnt % min_all_len;

        if(rem_a != 0)
        {
            num_a_cnt += min_all_len - rem_a;
            num_b_cnt = num_a_cnt;
        }

        final_val_len = num_a_cnt + num_b_cnt;
        // printf("after pad 0, cnt a = %d, cnt b = %d\n  final val len = %d\n", num_a_cnt, num_b_cnt, final_val_len);
        // printf("len per cg = %d\n", num_a_cnt / 8);
    }

    //计算余数大小
    hchjity md = 1;
    for(i = 0; i < KIU; i++)
        md *= 10;

    edcc = rpcc();
    ccs[0] = edcc - stcc;
    stcc = edcc;

    int core_x, core_y, my_core;

    int a_len_cb = num_a_cnt / CB_GS, b_len_cb = num_b_cnt / CB_GS; //已经确保了整除

    edcc = rpcc();
    ccs[1] = edcc - stcc;
    stcc = edcc;

    for(i = 0; i < FLAG_SIZE; i++)
    {
        slave_flag[i] = 0;
    }

    flag_to_wait = 1;

    edcc = rpcc();
    ccs[2] = edcc - stcc;
    stcc = edcc;

    for(my_core = 0; my_core < 8; my_core++)
    {
        local_compute_rets[my_core] = &final_val[my_core * a_len_cb];
    }

    for(my_core = 56; my_core < 62; my_core++)
    {
        local_compute_rets[my_core] = &final_val[(my_core - 56 + 8) * a_len_cb];
    }

    //特别修改14的。14的是62
    local_compute_rets[62] = &final_val[14 * a_len_cb];//指向final的相关位置

    athread_spawn(cpe_athread_daemon, NULL);


    edcc = rpcc();
    ccs[3] = edcc - stcc;
    stcc = edcc;

    //计算准备
    for(i = 0; i < final_val_len; i++)
        final_val[i] = 0;

    wait_slave_flag();
    asm volatile ("#nop":::"memory");

    edcc = rpcc();
    ccs[4] = edcc - stcc;
    stcc = edcc;

    edcc = rpcc();
    ccs[5] = edcc - stcc;//19239
    stcc = edcc;

    edcc = rpcc();
    ccs[6] = edcc - stcc;//148398
    stcc = edcc;

    //version 2
    for(k = a_len_cb - 1; k < final_val_len - 1; k += a_len_cb)
    {
        int remain = final_val[k] % md;
        int jhin = final_val[k] / md;

        i = k;

        while(jhin > 0)
        {
            final_val[i + 1] += jhin;
            final_val[i] = remain;
            i++;

            remain = final_val[i] % md;
            jhin = final_val[i] / md;
        }
    }

    edcc = rpcc();
    ccs[7] = edcc - stcc;//74229
    stcc = edcc;
}

int main()
{
    long ttstcc, ttedcc;

    read_util();
    athread_init();

    ttstcc = rpcc();

    compute_util();

    ttedcc = rpcc() - ttstcc;

    write_util(ttedcc);

    printf("%ld  %ld  %ld  %ld  %ld  %ld  %ld  %ld\n", ccs[0], ccs[1], ccs[2], ccs[3], ccs[4], ccs[5], ccs[6], ccs[7]);

    return 0;
}

